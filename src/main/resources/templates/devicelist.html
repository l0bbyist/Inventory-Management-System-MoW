<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
<meta name="description" content="POS - Bootstrap Admin Template">
<meta name="keywords" content="admin, estimates, bootstrap, business, corporate, creative, management, minimal, modern,  html5, responsive">
<meta name="author" content="Dreamguys - Bootstrap Admin Template">
<meta name="robots" content="noindex, nofollow">
<title>MoWIMS</title>

<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.jpg">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<link rel="stylesheet" href="assets/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/assets1/css/bootstrap.css"/>

<link rel="stylesheet" href="assets/css/animate.css">
<link rel="stylesheet" href="assets/plugins/select2/css/select2.min.css">

<link rel="stylesheet" href="assets/css/dataTables.bootstrap4.min.css">

<link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
<link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">

<link rel="stylesheet" href="assets/css/style.css">
<style>
	@media print {
	    body * {
	        visibility: hidden;
	    }

	    #print-section, #print-section * {
	        visibility: visible;
	    }

	    #print-section {
	        position: absolute;
	        left: 0;
	        top: 0;
	        width: 100%;
	        padding: 20px;
	    }

	    .print-header {
	        position: relative;
	        padding-bottom: 20px;
	        margin-bottom: 20px;
	        border-bottom: 2px solid #000;
	    }

	    .logo-left {
	        position: absolute;
	        top: 0;
	        left: 0;
	        width: 80px;
	    }

	    .logo-right {
	        position: absolute;
	        top: 0;
	        right: 0;
	        width: 80px;
	    }

	    .print-header h2 {
	        text-align: center;
	        margin: 0;
	        font-size: 22px;
	        font-weight: bold;
	    }

	    table {
	        width: 100%;
	        border-collapse: collapse;
	    }

	    table, th, td {
	        border: 1px solid black;
	    }

	    th, td {
	        padding: 8px;
	        text-align: left;
	    }

	    footer {
	        position: fixed;
	        bottom: 0;
	        left: 0;
	        width: 100%;
	        text-align: center;
	        font-size: 12px;
	    }
	}

</style>
</head>
<body>
<div id="global-loader">
<div class="whirly-loader"> </div>
</div>

<div class="main-wrapper">

<div class="header">

<div class="header-left active">
<a href="/index" class="logo">
<img src="assets/img/logo.png" alt="">
</a>
<a href="/index" class="logo-small">
<img src="assets/img/logo-small.png" alt="">
</a>
<!--<a id="toggle_btn" href="javascript:void(0);">-->
</a>
</div>

<a id="mobile_btn" class="mobile_btn" href="#sidebar">
<span class="bar-icon">
<span></span>
<span></span>
<span></span>
</span>
</a>

<ul class="nav user-menu">

<li class="nav-item">
<div class="top-nav-search">
<a href="javascript:void(0);" class="responsive-search">
<i class="fa fa-search"></i>
</a>
<form action="#">
<div class="searchinputs">
<input type="text" placeholder="Tafuta Hapa ...">
<div class="search-addon">
<span><img src="assets/img/icons/closes.svg" alt="img"></span>
</div>
</div>
<a class="btn" id="searchdiv"><img src="assets/img/icons/search.svg" alt="img"></a>
</form>
</div>
</li>




<li class="nav-item dropdown has-arrow main-drop">
<a href="javascript:void(0);" class="dropdown-toggle nav-link userset" data-bs-toggle="dropdown">
<span class="user-img"><img src="assets/img/profiles/avator1.jpg" alt="">
<span class="status online"></span></span>
</a>
<div class="dropdown-menu menu-drop-user">
<div class="profilename">
<div class="profileset">
<span class="user-img"><img src="assets/img/profiles/avator1.jpg" alt="">
<span class="status online"></span></span>
<div class="profilesets">
	<h6>Eric Jimmy</h6>
	<h5>admin</h5>
	</div>
	</div>
	<hr class="m-0">
	<a class="dropdown-item" href="profile.html"> <i class="me-2" data-feather="user"></i> My Profile</a>
	<hr class="m-0">
	<a class="dropdown-item logout pb-0" href="signin.html"><img src="assets/img/icons/log-out.svg" class="me-2" alt="img">Logout</a>
	</div>
</div>
</li>
</ul>


<div class="dropdown mobile-user-menu">
<a href="javascript:void(0);" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
<div class="dropdown-menu dropdown-menu-right">
<a class="dropdown-item" href="profile.html">My Profile</a>
<a class="dropdown-item" href="generalsettings.html">Settings</a>
<a class="dropdown-item" href="login.html">Logout</a>
</div>
</div>

</div>

<div class="sidebar" id="sidebar">
<div class="sidebar-inner slimscroll">
<div id="sidebar-menu" class="sidebar-menu">
<ul>
<li class="active">
<a href="/index"><img src="assets/img/icons/dashboard.svg" alt="img"><span> Dashboard</span> </a>
</li>
<li class="submenu">
<a href="javascript:void(0);"><img src="assets/img/icons/product.svg" alt="img"><span>Devices</span> </span></a>
<ul>
<li><a href="/devicelist">Devices List</a></li>
</ul>
</li>
<li class="submenu">
<li class="submenu">
<a href="javascript:void(0);"><img src="assets/img/icons/users1.svg" alt="img"><span>Staff</span> </span></a>
<ul>
<li><a href="/stafflist">Staff List</a></li>
</ul>
</li> 
<li class="submenu">
<a href="javascript:void(0);"><img src="assets/img/icons/places.svg" alt="img"><span> View Departments</span> </span></a>
<ul>
//code ya kuview depts!!
</ul>
</li>

<li class="submenu">
<a href="javascript:void(0);"><img src="assets/img/icons/product.svg" alt="img"><span> Application</span> </span></a>
<ul>
<li><a href="/chat">Chat</a></li>
<li><a href="/email">Email</a></li>
</ul>
</li>
<li class="submenu">
<a href="javascript:void(0);"><img src="assets/img/icons/purchase1.svg" alt="img"><span> Report</span> </span></a>
<ul>
<li><a href="/inventoryreport">Inventory Report</a></li>
<li><a href="/supplierreport">Department Report</a></li>
</ul>
</li>

<li class="submenu">
<a href="javascript:void(0);"><img src="assets/img/icons/settings.svg" alt="img"><span>Links</span> </span></a>
<ul>
<li><a href="/generalsettings">safari</a></li>
<li><a href="/emailsettings">pepmis</a></li>
<li><a href="/grouppermissions">gms</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>




<div class="page-wrapper">
<div class="content">
<div class="page-header">
<div class="page-title">
<h4>Devices</h4>
<h6>Manage Devices</h6>
</div>
<div class="page-btn d-inline-flex">
    <a href="/newdevice" class="btn btn-added">
        <img src="assets/img/icons/plus.svg" alt="img" class="me-1">Add Device
    </a>
	<a href="/assigndevice" class="btn btn-added ms-4">
	    <img src="assets/img/icons/edit-5.svg" alt="img" class="me-1">Assign Device
	</a>

	
</div>

</div>

<div class="card">
<div class="card-body">
<div class="table-top">
<div class="search-set">
<div class="search-path">
<a class="btn btn-filter" id="filter_search">
<img src="assets/img/icons/filter.svg" alt="img">
<span><img src="assets/img/icons/closes.svg" alt="img"></span>
</a>
</div>
<div class="search-input">
<a class="btn btn-searchset"><img src="assets/img/icons/search-white.svg" alt="img"></a>
</div>
</div>
<div class="wordset">
<button class="btn btn-primary" onclick="printTable();"><span class="glyphicon glyphicon-print"></span> Print</button>

</div>
</div>

<div class="card" id="filter_inputs">
<div class="card-body pb-0">
<div class="row">


</div>
</div>
</div>

<div class="table-responsive">
	<div id="print-section" style="display:none;">
	    <div class="print-header">
	        <img src="assets/img/emblem.png" alt="Logo Left" class="logo-left">
			<h2 style="text-align:center;">Ministry of Water Device Report</h2>
	        <img src="assets/img/drop.png" alt="Logo Right" class="logo-right">
	    </div>
	</div>

	<table class="table  datanew" id="toPrint">
	<thead>
	<tr>
	<th>dev_ID</th>
	<th>dev_NAME</th>
	<th>BRAND</th>
	<th>SERIAL#</th>
	<th>STATUS</th>
	<th>dev_OS</th>
	<th>DATE ADDED</th>
	<th class="text-center">Action</th>
	</tr>
	</thead>
	<tbody>
	        <!-- Thymeleaf loop to populate rows from database -->
	       </tbody>
	</table>
	<script>
	    // Fetch data from the API and display it in the table
	    fetch('/devices')
	        .then(response => response.json())
	        .then(data => {
	            let tableBody = document.querySelector('#toPrint tbody');
	            let rows = '';

	            data.forEach(device => {
	                rows += `
	                    <tr>
							<td>${device.dev_ID}</td>
							<td>${device.dev_NAME}</td>
	                        <td>${device.brand}</td>
	                        <td>${device.serial}</td>
							<td>${device.status}</td>
							<td>${device.dev_OS}</td>
							<td>${device.date_Added}</td>
							<td>
							    <a class="me-3" href="product-details.html">
							        <img src="assets/img/icons/eye.svg" alt="img">
							    </a>
							    <a class="me-3 edit-icon" href="javascript:void(0);" data-id="1">
							        <img src="assets/img/icons/edit.svg" alt="img">
							    </a>
							    <a class="me-3 delete-icon" href="javascript:void(0);" data-id="1">
							        <img src="assets/img/icons/delete.svg" alt="img">
							    </a>
							</td>
							
					
	                    </tr>
	                `;
	            });

	            tableBody.innerHTML = rows;
	        })
	        .catch(error => console.error('Error fetching devices:', error));
	</script>

	</div>
	</div>
	</div>

	</div>
	</div>
	</div>
	

<script src="assets/js/jquery-3.6.0.min.js"></script>

<script src="assets/js/feather.min.js"></script>

<script src="assets/js/jquery.slimscroll.min.js"></script>

<script src="assets/js/jquery.dataTables.min.js"></script>
<script src="assets/js/dataTables.bootstrap4.min.js"></script>

<script src="assets/js/bootstrap.bundle.min.js"></script>

<script src="assets/plugins/select2/js/select2.min.js"></script>

<script src="assets/plugins/sweetalert/sweetalert2.all.min.js"></script>
<script src="assets/plugins/sweetalert/sweetalerts.min.js"></script>
<script src="assets/js/script.js"></script>
<script src="assets1/js/script.js"></script>
<script>
function printTable() {
    // Get the table element
    var el = document.getElementById("toPrint");
    el.setAttribute('border', '1px');
    el.setAttribute('cellpadding', '5');
    
    // Create the print window
    newPrint = window.open("");
    
    // Write the document with proper headers and styling
    newPrint.document.write('<html><head><title>MoWIMS Device Report</title>');
    newPrint.document.write('<style>');
    newPrint.document.write('@media print { table, th, td { border: 1px solid black; border-collapse: collapse; } th, td { padding: 8px; } }');
    newPrint.document.write('.print-header { position: relative; height: 100px; margin-bottom: 20px; }');
    newPrint.document.write('.logo-left { position: absolute; left: 0; top: 0; width: 100px; }');
    newPrint.document.write('.logo-right { position: absolute; right: 0; top: 0; width: 100px; }');
    newPrint.document.write('h1, h3 { text-align: center; margin: 5px 0; }');
    newPrint.document.write('</style>');
    newPrint.document.write('</head><body>');
    
    // Add the header with logos
    newPrint.document.write('<div class="print-header">');
    newPrint.document.write('<img src="assets/img/emblem.png" alt="Logo Left" class="logo-left" onload="this.onload=null; this.src=\'assets/img/emblem.png\';">');
    newPrint.document.write('<img src="assets/img/drop.png" alt="Logo Right" class="logo-right" onload="this.onload=null; this.src=\'assets/img/drop.png\';">');
    newPrint.document.write('<h1>Ministry of Water</h1>');
    newPrint.document.write('<h3>ICT Department</h3>');
    newPrint.document.write('</div>');
    
    // Add the table content
    newPrint.document.write(el.outerHTML);
    
    // Add footer with date
    var date = new Date();
    var formattedDate = date.toLocaleDateString();
    newPrint.document.write('<footer style="margin-top: 20px; text-align: center;">Printed on: ' + formattedDate + '</footer>');
    
    newPrint.document.write('</body></html>');
    newPrint.document.close();
    
    // Wait for images to load before printing
    setTimeout(function() {
        newPrint.print();
        // Don't close the window immediately to allow proper printing
    }, 500);
}
</script>


</body>
</html>
